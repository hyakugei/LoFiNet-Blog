<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Simple Sprite Animator DSL - LofFiNet</title><meta name="description" content="Animation DSL Documentation This guide explains how to write animation definitions using the Animation DSL (Domain-Specific Language). The DSL is a text-based format for defining sprite animation states. Each animation state follows this format: StateName: frame1, frame2, frame3, ... Or with an optional sprite category&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://lofinet.org/simple-sprite-animator-dsl.html"><link rel="alternate" type="application/atom+xml" href="https://lofinet.org/feed.xml" title="LofFiNet - RSS"><link rel="alternate" type="application/json" href="https://lofinet.org/feed.json" title="LofFiNet - JSON"><meta property="og:title" content="Simple Sprite Animator DSL"><meta property="og:site_name" content="LofFiNet"><meta property="og:description" content="Animation DSL Documentation This guide explains how to write animation definitions using the Animation DSL (Domain-Specific Language). The DSL is a text-based format for defining sprite animation states. Each animation state follows this format: StateName: frame1, frame2, frame3, ... Or with an optional sprite category&hellip;"><meta property="og:url" content="https://lofinet.org/simple-sprite-animator-dsl.html"><meta property="og:type" content="article"><link rel="stylesheet" href="https://lofinet.org/assets/css/style.css?v=b09e72b2ca1a38c969d44da51bb22509"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://lofinet.org/simple-sprite-animator-dsl.html"},"headline":"Simple Sprite Animator DSL","datePublished":"2025-11-24T09:26-05:00","dateModified":"2025-11-24T09:26-05:00","description":"Animation DSL Documentation This guide explains how to write animation definitions using the Animation DSL (Domain-Specific Language). The DSL is a text-based format for defining sprite animation states. Each animation state follows this format: StateName: frame1, frame2, frame3, ... Or with an optional sprite category&hellip;","author":{"@type":"Person","name":"Jos","url":"https://lofinet.org/authors/jos/"},"publisher":{"@type":"Organization","name":"Jos"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript></head><body class="page-template"><header class="top js-header"><a class="logo" href="https://lofinet.org/">LofFiNet</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li><a href="https://lofinet.org/todo.html" target="_self">Todo</a></li></ul></nav></header><main class="page"><article class="content"><div class="hero hero--noimage"><header class="hero__content"><div class="wrapper"><h1>Simple Sprite Animator DSL</h1></div></header></div><div class="entry-wrapper content__entry"><h1 id="animation-dsl-documentation">Animation DSL Documentation</h1><p>This guide explains how to write animation definitions using the Animation DSL (Domain-Specific Language). The DSL is a text-based format for defining sprite animation states.</p><h2 id="basic-syntax">Basic Syntax</h2><p>Each animation state follows this format:</p><pre><code>StateName: frame1, frame2, frame3, ...
</code></pre><p>Or with an optional sprite category alias:</p><pre><code>StateName[SpriteCategory]: frame1, frame2, frame3, ...
</code></pre><p><strong>IMPORTANT:</strong> Every state <strong>MUST</strong> end with explicit end behavior: <code>_wait</code>, <code>_loop</code>, <code>_pingpong</code>, or a state transition. The parser will throw an error if you forget this.</p><h2 id="frame-data-format">Frame Data Format</h2><p>Each frame can be specified in several ways:</p><h3 id="1-duration-only-simplest">1. Duration Only (Simplest)</h3><pre><code>5
</code></pre><ul><li>Shows frame for 5 fixed update ticks</li><li>Frame index is automatically assigned (0, 1, 2, 3…)</li><li><strong>Duration must be &gt;= 0</strong> (negative durations are not allowed)</li></ul><p><strong>Example:</strong></p><pre><code>Walk: 5, 5, 5, 5, _loop
</code></pre><p>This creates a 4-frame walk animation where each frame displays for 5 ticks. Frame indices are 0, 1, 2, 3. <strong>Note:</strong> Must end with <code>_loop</code> (or <code>_wait</code>/transition).</p><h3 id="2-duration-with-events">2. Duration with Events</h3><pre><code>5|eventName
</code></pre><ul><li>Shows frame for 5 ticks</li><li>Triggers an event when entering this frame</li><li>Multiple events: <code>5|event1|event2|event3</code></li></ul><p><strong>Example:</strong></p><pre><code>Attack: 5|swingSound, 5|hitSound, 5, Idle
</code></pre><p>Frame 0 plays for 5 ticks and triggers <code>swingSound</code>. Frame 1 plays for 5 ticks and triggers <code>hitSound</code>. Frame 2 plays for 5 ticks with no events, then transitions to <code>Idle</code>.</p><h3 id="3-explicit-duration--frame-index">3. Explicit Duration + Frame Index</h3><pre><code>5|2
</code></pre><ul><li>Displays for 5 ticks</li><li>Uses sprite frame index 2</li><li>Useful when sprites aren’t sequential (e.g., using frame 0, then frame 5, then frame 2)</li><li><strong>Note:</strong> Duration always comes first, frame index second</li><li><strong>Duration must be &gt;= 0, frame index must be &gt;= 0</strong> (negative values are not allowed)</li></ul><p><strong>Example:</strong></p><pre><code>Idle: 10|0, 10|1, 10|2, 10|1, _loop
</code></pre><p>10 ticks showing sprite 0, then 10 ticks sprite 1, then 10 ticks sprite 2, then 10 ticks sprite 1, then loops back to sprite 0.</p><h3 id="4-duration--frame-index--events">4. Duration + Frame Index + Events</h3><pre><code>5|2|eventName
</code></pre><ul><li>Displays for 5 ticks</li><li>Uses sprite frame index 2</li><li>Triggers custom event(s)</li><li><strong>Note:</strong> Duration always comes first, frame index second</li><li><strong>Duration must be &gt;= 0, frame index must be &gt;= 0</strong> (negative values are not allowed)</li><li><strong>Important:</strong> Special events (<code>_wait</code>, <code>_loop</code>, <code>_pingpong</code>) cannot be inline with duration/frameIndex. They must be on separate frame entries (e.g., <code>5|2, _wait</code> not <code>5|2|_wait</code>)</li></ul><p><strong>Example:</strong></p><pre><code>Jump: 3|0|jumpSound, 3|1, 3|2|landSound, _wait
</code></pre><h3 id="5-events-only-control-frames">5. Events Only (Control Frames)</h3><pre><code>_loop
_wait
_pingpong
StateName
_loop|customEvent
_wait|sfxSound
</code></pre><ul><li>These are <strong>control-only frames</strong> that don’t display new sprites</li><li><strong>Duration is automatically 0</strong> (instant, no display time)</li><li><strong>Reuses the last displayed sprite frame</strong> - does not advance the sprite counter</li><li>Special events (<code>_wait</code>, <code>_loop</code>, <code>_pingpong</code>) must be on events-only frames (cannot be inline with duration/frameIndex)</li><li>Special events can be combined with custom events: <code>_wait|sfxSound</code></li><li>Custom events can be inline: <code>5|2|myEvent</code> (but special events cannot)</li><li><strong>Must be on the last frame</strong> (or the parser will error)</li></ul><p><strong>Important:</strong> Events-only frames keep displaying the same sprite as the previous frame. For example, <code>fall: 8, _wait</code> will display sprite 0 for 8 ticks, then continue displaying sprite 0 during the wait (not sprite 1). You could use <code>fall: 8, 0|1, _wait</code> if you wanted to display sprite 1 during the wait.</p><h2 id="special-events">Special Events</h2><h3 id="_loop"><code>_loop</code></h3><p>Restarts the animation from the beginning. Use this for animations that should repeat indefinitely. Must be on an events-only frame (cannot be inline with duration/frameIndex).</p><p><strong>Example:</strong></p><pre><code>Idle: 10, 10, 10, 10, _loop
Run: 5, 5, 5, 5, _loop|vfxRun
</code></pre><p>First example: Plays frames 0-3, then loops back to frame 0 indefinitely. Second example: Loops and triggers a visual effect.</p><h3 id="_wait"><code>_wait</code></h3><p>Pauses the animation on the last displayed frame. The animation won’t advance until manually changed via <code>SetState()</code>. Must be on an events-only frame (cannot be inline with duration/frameIndex). The sprite displayed during wait is the same as the last frame that had duration &gt; 0.</p><p><strong>Example:</strong></p><pre><code>Death: 5, 5, 5, 5, _wait
Fall: 1|2, _wait|sfxLand
</code></pre><p>First example: Plays all 4 frames (sprites 0, 1, 2, 3), then waits and continues displaying sprite 3. Second example: Shows frame 2 for 1 tick, then waits and continues displaying sprite 2 (not sprite 3) while playing sound effect.</p><h3 id="_pingpong"><code>_pingpong</code></h3><p>Reverses the animation direction, playing frames backwards. The animation will ping-pong back and forth indefinitely. When the ping-pong event fires, it skips back 2 frames to avoid displaying the last frame twice. Must be on an events-only frame (cannot be inline with duration/frameIndex). The ping-pong frame itself uses the last displayed sprite index (doesn’t advance the sprite counter).</p><p><strong>Example:</strong></p><pre><code>Breathe: 5, 5, 5, 5, _pingpong
BreatheVfx: 5, 5, 5, 5, _pingpong|vfxBreathe
</code></pre><p>Plays frames 0→1→2→3, then reverses to 2→1→0, then forward again 1→2→3, then reverses 2→1→0, repeating indefinitely.</p><p><strong>Sequence:</strong> <code>0, 1, 2, 3, 2, 1, 0, 1, 2, 3, 2, 1, 0, ...</code></p><p>Note that frame 3 is not displayed twice in a row - when ping-pong fires after frame 3, it goes back to frame 2, then continues backwards. The <code>_pingpong</code> frame itself displays sprite 3 (the last displayed sprite before ping-pong).</p><h3 id="state-transition-using-state-name-as-event">State Transition (Using State Name as Event)</h3><p>Transitions to another animation state when reaching this frame. The state name must match an existing state (case-sensitive).</p><p><strong>Example:</strong></p><pre><code>Attack: 5, 5, 5, Idle
</code></pre><p>Plays 3 frames of attack animation, then automatically transitions to the <code>Idle</code> state.</p><h2 id="state-aliases-sprite-category-reuse">State Aliases (Sprite Category Reuse)</h2><p>You can specify a sprite category alias using brackets. This allows multiple states to reuse the same sprite set while having different state names.</p><p><strong>Format:</strong></p><pre><code>StateName[SpriteCategory]: frames...
</code></pre><p><strong>Important Notes:</strong></p><ul><li>The part <strong>before</strong> the brackets (<code>StateName</code>) is used for <code>SetState()</code> lookups - this is the “real” state name</li><li>The part <strong>inside</strong> the brackets (<code>SpriteCategory</code>) is used internally for sprite resolution only</li><li>You <strong>cannot</strong> use the alias to look up states - only the state name works</li><li>This is purely for sprite asset reuse, not for alternative naming</li></ul><p><strong>Example:</strong></p><pre><code>Fall[Jump]: 1|2, _wait
Running[Run]: 10, 10, 10, 10, _loop
Walk[Run]: 20, 20, 20, 20, _loop
</code></pre><ul><li><code>Fall[Jump]</code>: State name is “Fall” (use <code>SetState(&quot;Fall&quot;)</code>), but uses “Jump” sprite category. Shows frame 2 for 1 tick, then waits.</li><li><code>Running[Run]</code>: State name is “Running” (use <code>SetState(&quot;Running&quot;)</code>), but uses “Run” sprite category</li><li><code>Walk[Run]</code>: State name is “Walk” (use <code>SetState(&quot;Walk&quot;)</code>), but uses “Run” sprite category</li></ul><p><strong>You CANNOT do:</strong> <code>SetState(&quot;Run&quot;)</code> to access <code>Running[Run]</code> or <code>Walk[Run]</code> - you must use the actual state names.</p><h2 id="explicit-end-behavior-required">Explicit End Behavior Required</h2><p><strong>CRITICAL:</strong> Every state <strong>MUST</strong> have explicit end behavior on its last frame. The parser will throw an <code>InvalidOperationException</code> if you forget this.</p><p>Valid end behaviors:</p><ul><li><code>_wait</code> - stops and waits</li><li><code>_loop</code> - loops indefinitely</li><li><code>_pingpong</code> - ping-pongs back and forth</li><li>A valid state name - transitions to that state</li></ul><p><strong>❌ Invalid (will throw error):</strong></p><pre><code>Fire: 5, 5
</code></pre><p><strong>✅ Valid:</strong></p><pre><code>Fire: 5, 5, _wait
Fire: 5, 5, _loop
Fire: 5, 5, Idle
</code></pre><h2 id="complete-examples">Complete Examples</h2><h3 id="example-1-simple-idle-animation-4-frames-looping">Example 1: Simple Idle Animation (4 frames, looping)</h3><pre><code>Idle: 10, 10, 10, 10, _loop
</code></pre><h3 id="example-2-walk-animation-4-frames-looping-with-sound-effect">Example 2: Walk Animation (4 frames, looping, with sound effect)</h3><pre><code>Walk: 5|stepSound, 5, 5|stepSound, 5, _loop
</code></pre><h3 id="example-3-attack-animation-3-frames-returns-to-idle">Example 3: Attack Animation (3 frames, returns to idle)</h3><pre><code>Attack: 8, 8, 8, Idle
</code></pre><h3 id="example-4-jump-animation-3-frames-waits-at-end">Example 4: Jump Animation (3 frames, waits at end)</h3><pre><code>Jump: 5, 5, 5, _wait
</code></pre><h3 id="example-5-death-animation-5-frames-stops-at-end">Example 5: Death Animation (5 frames, stops at end)</h3><pre><code>Death: 6, 6, 6, 6, 6, _wait
</code></pre><h3 id="example-6-complex-attack-with-events-5-frames">Example 6: Complex Attack with Events (5 frames)</h3><pre><code>Slash: 3|swingStart, 3|swingMid, 3|hitFrame, 3|recover, 3, Idle
</code></pre><h3 id="example-7-ping-pong-breathing-4-frames">Example 7: Ping-Pong Breathing (4 frames)</h3><pre><code>Breathe: 8, 8, 8, 8, _pingpong
</code></pre><p>Plays frames 0→1→2→3, then reverses 2→1→0, then forward 1→2→3, repeating. Sequence: <code>0, 1, 2, 3, 2, 1, 0, 1, 2, 3, 2, 1, 0, ...</code></p><h3 id="example-8-using-explicit-frame-indices-non-sequential-sprites">Example 8: Using Explicit Frame Indices (non-sequential sprites)</h3><pre><code>Special: 5|0, 5|5, 5|2, 5|7, _loop
</code></pre><p>Uses sprite frames 0, 5, 2, 7 in that order. Each frame displays for 5 ticks. The <code>_loop</code> frame reuses sprite 7 (the last displayed sprite).</p><h3 id="example-9-state-with-sprite-category-alias">Example 9: State with Sprite Category Alias</h3><pre><code>Fall[Jump]: 1|2, _wait
Fall[Jump]: 1|2, _wait|sfxLand
</code></pre><p>State name is “Fall” (use <code>SetState(&quot;Fall&quot;)</code>), but uses “Jump” sprite category for sprite resolution. Shows frame 2 for 1 tick, then waits. The <code>_wait</code> must be on a separate frame entry (not inline). Can combine with custom events: <code>_wait|sfxLand</code>. The <code>_wait</code> frame reuses sprite 2 (the last displayed sprite).</p><h3 id="example-10-duration-0-with-explicit-frame-index-instant-sprite-change">Example 10: Duration 0 with Explicit Frame Index (instant sprite change)</h3><pre><code>Jump: 5, 0|2, 5, _wait
</code></pre><p>Displays sprite 0 for 5 ticks, then instantly sets sprite to 2 (duration 0), then displays sprite 3 for 5 ticks, then waits on sprite 3. The <code>0|2</code> frame sets the sprite immediately even though duration is 0.</p><h3 id="example-11-duration-0-with-auto-frame-index-control-only">Example 11: Duration 0 with Auto Frame Index (control-only)</h3><pre><code>Attack: 5, 0|sfxHit, 5, Idle
</code></pre><p>Displays sprite 0 for 5 ticks, then instantly triggers <code>sfxHit</code> event without changing sprite (reuses sprite 0), then displays sprite 1 for 5 ticks, then transitions to Idle. The <code>0|sfxHit</code> frame is control-only and doesn’t advance the sprite counter.</p><h2 id="tips-for-setting-up-3-5-animations">Tips for Setting Up 3-5 Animations</h2><ol><li><strong>Start simple</strong>: Use duration-only frames (<code>5, 5, 5</code>) until you get the timing right</li><li><strong>Common durations</strong>:<ul><li>Fast actions (attacks): 3-5 ticks per frame</li><li>Normal movement: 5-10 ticks per frame</li><li>Slow/idle: 10-20 ticks per frame</li></ul></li><li><strong>Always end with explicit behavior</strong>: <code>_loop</code>, <code>_wait</code>, <code>_pingpong</code>, or a state transition - <strong>this is required, not optional</strong></li><li><strong>Test incrementally</strong>: Add one animation at a time and test before adding more</li><li><strong>Use aliases for sprite reuse</strong>: Only use <code>StateName[Alias]</code> when you want multiple states to share the same sprite set</li></ol><h2 id="common-patterns">Common Patterns</h2><p><strong>Looping idle:</strong></p><pre><code>Idle: 15, 15, 15, 15, _loop
</code></pre><p><strong>One-shot attack returning to idle:</strong></p><pre><code>Punch: 4, 4, 4, Idle
</code></pre><p><strong>Movement with looping:</strong></p><pre><code>Run: 5, 5, 5, 5, _loop
</code></pre><p><strong>Death sequence:</strong></p><pre><code>Death: 6, 6, 6, 6, 6, _wait
</code></pre><p><strong>Action with sound effects:</strong></p><pre><code>Shoot: 3|gunSound, 3, 3, 3, Idle
</code></pre><p><strong>State reusing sprites from another state:</strong></p><pre><code>Fall[Jump]: 1|2, _wait
</code></pre><p>Use <code>SetState(&quot;Fall&quot;)</code> to activate, but it uses “Jump” sprites. Shows frame 2 for 1 tick, then waits.</p><h2 id="notes">Notes</h2><ul><li>Frame indices start at 0</li><li>If you don’t specify a frame index, it auto-increments (0, 1, 2, 3…)</li><li>Duration is measured in FixedUpdate ticks (typically 50 per second)</li><li><strong>Duration must be &gt;= 0</strong> - negative durations are not allowed (parser will throw error)</li><li><strong>Frame index must be &gt;= 0</strong> - negative frame indices are not allowed (parser will throw error)</li><li><strong>Duration 0 with auto frameIndex</strong> = control-only frame (reuses last displayed sprite, doesn’t advance sprite counter)</li><li><strong>Duration 0 with explicit frameIndex</strong> = sets sprite immediately (explicit frameIndex always sets sprite, even with duration 0)</li><li><strong>Events-only frames</strong> (<code>_wait</code>, <code>_loop</code>, <code>_pingpong</code>, state transitions) have duration 0 and reuse the last displayed sprite</li><li><strong>Special events</strong> (<code>_wait</code>, <code>_loop</code>, <code>_pingpong</code>) must be on events-only frames, not inline with duration/frameIndex<ul><li>✅ Allowed: <code>5|2, _wait</code> or <code>_wait|sfxSound</code></li><li>❌ Not allowed: <code>5|2|_wait</code> (parser will throw error)</li></ul></li><li><strong>Custom events</strong> can be inline: <code>5|2|myEvent</code> is valid</li><li><strong>To wait on a specific frame</strong>: Use <code>1|frameIndex, _wait</code> (separate frame entries)</li><li><strong>Control frames</strong> (duration=0 or events-only) don’t advance the sprite counter - they reuse the last displayed sprite</li><li>Empty lines are ignored</li><li>State names are case-sensitive</li><li>You can have multiple states in one DSL file, one per line</li><li><strong>Every state must have explicit end behavior</strong> - the parser validates this and will throw an error if missing</li><li>State aliases (brackets) are for sprite category reuse only - you cannot use them to look up states</li><li>Events fire when entering a frame (at the start), not after the duration completes</li></ul></div></article></main><footer class="footer"><div class="wrapper"><div class="footer__copyright"><p>Copyright Jos Yule 2025</p></div><button id="backToTop" class="footer__bttop" aria-label="Back to top" title="Back to top"><svg width="20" height="20"><use xlink:href="https://lofinet.org/assets/svg/svg-map.svg#toparrow"/></svg></button></div></footer><script defer="defer" src="https://lofinet.org/assets/js/scripts.min.js?v=ffcbea6c02c8178d10092962b235a5b0"></script><script>window.publiiThemeMenuConfig={mobileMenuMode:'sidebar',animationSpeed:300,submenuWidth: 'auto',doubleClickTime:500,mobileMenuExpandableSubmenus:true,relatedContainerForOverlayMenuSelector:'.top'};</script><script>var images = document.querySelectorAll('img[loading]');
        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script></body></html>